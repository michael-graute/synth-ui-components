<div class="ins-metal-synth card" [class]="{'inactive': !active}">
  <div class="ins-metal-synth__header card-header">
    <div class="d-flex justify-content-between align-items-center">{{ name }} <ins-switch [(ngModel)]="active" [hasLabel]="false"></ins-switch></div>
  </div>
  <div class="ins-metal-synth__body card-body">
    <ins-divider label="Settings" class="mt-0"></ins-divider>
    <div class="d-flex gap-1 flex-wrap">
      <div class="ins-knob-container ins-metal-synth__harmonicity">
        <ins-knob [id]="id + 'KnobHarmonicity'" type="dot" label="harmon" [min]="0" [max]="2" [step]=".1" [(ngModel)]="harmonicity" (change)="triggerUndo('harmonicity', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobHarmonicityMidiOverlay'" [min]="0" [max]="1" [step]=".1" [(ngModel)]="harmonicity"></ins-midi-overlay>
      </div>
      <div class="ins-knob-container ins-metal-synth__volume">
        <ins-knob [id]="id + 'KnobVolume'" label="Volume" [min]="-20" [max]="0" [(ngModel)]="volume" (change)="triggerUndo('volume', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobVolumeMidiOverlay'" [min]="-20" [max]="0" [(ngModel)]="volume"></ins-midi-overlay>
      </div>
      <div class="ins-knob-container ins-metal-synth__detune">
        <ins-knob [id]="id + 'KnobDetune'" type="dot" label="detune" [min]="-10" [max]="10" [step]="1" [(ngModel)]="detune" (change)="triggerUndo('detune', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobDetuneMidiOverlay'" [min]="-10" [max]="10" [step]="1" [(ngModel)]="detune"></ins-midi-overlay>
      </div>
      <div class="ins-knob-container ins-metal-synth__portamento">
        <ins-knob [id]="id + 'KnobPortamento'" type="dot" label="portam" [min]="-10" [max]="10" [step]="1" [(ngModel)]="portamento" (change)="triggerUndo('portamento', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobPortamentoMidiOverlay'" [min]="-10" [max]="10" [step]="1" [(ngModel)]="portamento"></ins-midi-overlay>
      </div>
      <div class="ins-knob-container ins-metal-synth__modulationIndex">
        <ins-knob [id]="id + 'KnobModulationIndex'" type="dot" label="Mod Ind" [min]="0" [max]="100" [step]="1" [(ngModel)]="modulationIndex" (change)="triggerUndo('modulationIndex', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobModulationIndexMidiOverlay'" [min]="0" [max]="10" [step]="1" [(ngModel)]="modulationIndex"></ins-midi-overlay>
      </div>
      <div class="ins-knob-container ins-metal-synth__octaves">
        <ins-knob [id]="id + 'KnobOctaves'" type="dot" label="Octaves" [min]="0" [max]="4" [step]=".1" [(ngModel)]="octaves" (change)="triggerUndo('octaves', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobOctavesIndexMidiOverlay'" [min]="0" [max]="4" [step]=".1" [(ngModel)]="octaves"></ins-midi-overlay>
      </div>
      <div class="ins-knob-container ins-metal-synth__resonance">
        <ins-knob [id]="id + 'KnobResonance'" type="dot" label="Res" [min]="0" [max]="10000" [step]="10" [(ngModel)]="resonance" (change)="triggerUndo('resonance', $event)"></ins-knob>
        <ins-midi-overlay [id]="id + 'KnobResonanceMidiOverlay'" [min]="0" [max]="10000" [step]="10" [(ngModel)]="resonance"></ins-midi-overlay>
      </div>
    </div>
    <ins-divider label="Amplitude Envelope"></ins-divider>
    <div class="ins-simple-synth__envelope">
      <ins-adsr-envelope [id]="id + 'ADSR'" [(ngModel)]="envelope" [width]="210" [height]="50" (change)="triggerUndo('envelope', $event)"></ins-adsr-envelope>
    </div>
  </div>
</div>
